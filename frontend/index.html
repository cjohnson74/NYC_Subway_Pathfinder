<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Subway Shortest Path Finder</title>
    <style>
        #map {
            height: 400px;
            width: 100%;
        }
    </style>
</head>
<body>
    <div>
        <label for="start">Start:</label>
        <input type="text" id="start" placeholder="Enter start station">
        <label for="end">End:</label>
        <input type="text" id="end" placeholder="Enter end station">
        <button onclick="findShortestPath()">Find Shortest Path</button>
        <button onclick="constructTranist()">Construct Transit</button>
    </div>
    <div id="map"></div>

    <script>
        // Funciton to send HTTP request to the backend and construt transit object
        function constructTransit() {
            var start = document.getElementById('start').value;
            var end = document.getElementById('end').value;

            // Send HTTP request to the backend
            fetch('/constructTransit', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ start: start, end: end })
            })
            .then(response => response.json())
            .then(data => {
                console.log(data.res);
            })
            .catch(error => {
                console.error('Error:', error);
            });
        }

        // Function to send HTTP request to the backend and display shortest path on the map
        function findShortestPath() {
            var start = document.getElementById('start').value;
            var end = document.getElementById('end').value;

            // Send HTTP request to the backend
            fetch('/findShortestPath', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ start: start, end: end })
            })
            .then(response => response.json())
            .then(data => {
                console.log(data.shortestPath);
                // Display the shortest path on the map
                displayShortestPath(data.shortestPath);
            })
            .catch(error => {
                console.error('Error:', error);
            });
        }

        // Function to display the shortest path on the map
        function displayShortestPath(path) {
            // Initialize Google Maps
            var map = new google.maps.Map(document.getElementById('map'), {
                center: { lat: 40.7128, lng: -74.0060 }, // New York City coordinates
                zoom: 12
            });

            // Create an array of LatLng objects representing the path
            var routeCoordinates = path.map(function(point) {
                return new google.maps.LatLng(point[0], point[1]);
            });

            // Construct the polyline
            var shortestPath = new google.maps.Polyline({
                path: routeCoordinates,
                geodesic: true,
                strokeColor: '#FF0000',
                strokeOpacity: 1.0,
                strokeWeight: 2
            });

            // Set the polyline on the map
            shortestPath.setMap(map);
        }
    </script>
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA7c2-82jra5yvV4KTrVxVcTvnaXdYHej"></script>
</body>
</html>